{"version":3,"sources":["app.js"],"names":["App","jQuery","document","ready","init","html","form","submit","find","machineDropdown","toggleSettingsButton","bindings","click","e","preventDefault","toggleSettings","machineWakeUp","val","on","machineCreate","this","parents","machineDelete","machineEdit","closeAdvancedForm","toggleAdvanced","slideUp","toggleAdvancedFormButton","show","container","inputName","inputAddress","button","hasClass","addClass","data","name","address","post","response","status","updateView","id","machine","animate","height","opacity","remove","content","focus","removeClass","obj","machineSave","oldContent","setTimeout","parent","before","message","stop","toggleAdvancedForm","slideDown","hide","toggleClass","get"],"mappings":"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","file":"scripts.combined.min.js","sourcesContent":["var App;\njQuery(document).ready(function(){\n\n\tApp = {\n\n\t\tinit:function(){\n\n\t\t\t// Cache\n\t\t\tApp.html = jQuery('html');\n\n\t\t\tApp.form = jQuery('.wake-up');\n\t\t\tApp.submit = App.form.find('button[type=\"submit\"]');\n\t\t\tApp.machineDropdown = jQuery('.machine-select');\n\n\t\t\tApp.toggleSettingsButton = jQuery('.settings-toggle');\n\n\t\t\t// Go!\n\t\t\tApp.bindings();\n\n\t\t},\n\n\t\tbindings:function(){\n\n\t\t\tApp.toggleSettingsButton.click(function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tApp.toggleSettings();\n\t\t\t});\n\n\t\t\tApp.form.submit(function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tApp.machineWakeUp( App.machineDropdown.val() );\n\t\t\t});\n\n\t\t\tApp.html.on('click', '.machine-create', function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tApp.machineCreate(jQuery(this).parents('.machine') );\n\t\t\t});\n\n\t\t\tApp.html.on('click', '.machine-delete', function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tApp.machineDelete( jQuery(this) );\n\t\t\t});\n\n\t\t\tApp.html.on('click', '.machine-edit', function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tApp.machineEdit( jQuery(this) );\n\t\t\t});\n\n\t\t},\n\n\t\tcloseAdvancedForm:function(){\n\t\t\tApp.toggleAdvanced.slideUp();\n\t\t\tApp.toggleAdvancedFormButton.show();\n\t\t},\n\n\t\tmachineCreate:function( container ){\n\n\t\t\tvar inputName = container.find('input[name=\"machine-name\"]'),\n\t\t\t\tinputAddress = container.find('input[name=\"machine-address\"]'),\n\t\t\t\tbutton = container.find('.create-machine');\n\n\t\t\tif ( '' == inputName.val() || '' == inputAddress.val() )\n\t\t\t\treturn;\n\n\t\t\tif ( button.hasClass('submitting') )\n\t\t\t\treturn;\n\n\t\t\tbutton.addClass('submitting');\n\n\t\t\tvar data = {\n\t\t\t\tname: inputName.val(),\n\t\t\t\taddress: inputAddress.val(),\n\t\t\t};\n\n\t\t\tjQuery.post('api/create.php',data, function(response){\n\n\t\t\t\tif ( 'ok' != response.status )\n\t\t\t\t\treturn;\n\n\t\t\t\tinputName.val('');\n\t\t\t\tinputAddress.val('');\n\n\t\t\t\t// Update view\n\t\t\t\tApp.updateView();\n\n\t\t\t},'json');\n\n\t\t},\n\n\t\tmachineDelete:function(button){\n\n\t\t\tvar data = {\n\t\t\t\tid: button.data('id'),\n\t\t\t};\n\n\t\t\tjQuery.post('api/delete.php',data, function(response){\n\n\t\t\t\tif ( 'ok' != response.status )\n\t\t\t\t\treturn;\n\n\t\t\t\tvar machine = jQuery('.machine-' + button.data('id') );\n\n\t\t\t\tmachine.animate({\n\t\t\t\t\theight: 0,\n\t\t\t\t\topacity: 0\n\t\t\t\t}, 'slow', function() {\n\t\t\t\t\tjQuery(this).remove();\n\t\t\t\t\tApp.updateView();\n\t\t\t    });\n\n\t\t\t},'json');\n\n\t\t},\n\n\t\tmachineEdit:function( button ){\n\n\t\t\tvar container = button.parents('.machine'),\n\t\t\t\tcontent = container.html();\n\n\t\t\tcontainer.html(\n\t\t\t\t'<p><input name=\"machine-name\" value=\"' + container.data('name') + '\" required placeholder=\"Name\"></p>' +\n\t\t\t\t'<p><input name=\"machine-address\" value=\"' + container.data('address') + '\" required placeholder=\"Adress\"></p>' +\n\t\t\t\t'<p><a class=\"machine-edit-cancel\" href=\"#\">Abbruch</a> <button class=\"machine-edit-save button-secondary\">Speichern</button></p>'\n\t\t\t).addClass('editing');\n\n\t\t\tcontainer.find('[name=\"machine-name\"]').focus();\n\n\t\t\tcontainer.find('.machine-edit-cancel').click(function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tcontainer\n\t\t\t\t\t.html(content)\n\t\t\t\t\t.removeClass('editing');\n\t\t\t});\n\n\t\t\tcontainer.find('.machine-edit-save').click(function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\tvar obj = jQuery(this);\n\n\t\t\t\tif ( obj.hasClass('submitting') )\n\t\t\t\t\treturn;\n\n\t\t\t\tobj.addClass('submitting');\n\t\t\t\tApp.machineSave(container, content);\n\t\t\t});\n\n\t\t},\n\n\t\tmachineSave:function(container, oldContent){\n\n\t\t\tvar inputName = container.find('[name=\"machine-name\"]'),\n\t\t\t\tinputAddress = container.find('[name=\"machine-address\"]');\n\n\t\t\tif ( '' == inputName.val() || '' == inputAddress.val() )\n\t\t\t\treturn;\n\n\t\t\tvar data = {\n\t\t\t\t\tid: container.data('id'),\n\t\t\t\t\tname: inputName.val(),\n\t\t\t\t\taddress: inputAddress.val(),\n\t\t\t\t};\n\n\t\t\tjQuery.post('api/update.php', data, function(response){\n\n\t\t\t\tif ( 'ok' != response.status )\n\t\t\t\t\treturn;\n\n\t\t\t\tcontainer.find('.submitting').removeClass('submitting');\n\n\t\t\t\tcontainer\n\t\t\t\t\t.removeClass('editing')\n\t\t\t\t\t.html(oldContent)\n\t\t\t\t\t.data('name', inputName.val())\n\t\t\t\t\t.data('address', inputAddress.val());\n\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.machine-name')\n\t\t\t\t\t.html(inputName.val());\n\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.machine-address')\n\t\t\t\t\t.html(inputAddress.val());\n\n\t\t\t}, 'json');\n\n\t\t},\n\n\t\tmachineWakeUp:function( machine ){\n\n\t\t\tif ( '' == machine )\n\t\t\t\treturn;\n\n\n\n\t\t\tvar data = {\n\t\t\t\tid: machine\n\t\t\t};\n\n\t\t\tApp.submit.addClass('submitting');\n\n\t\t\tjQuery.post('api/wake-up.php', data, function(response){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tApp.submit.removeClass('submitting');\n\n\t\t\t\t\tif ( 'ok' != response.status )\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tApp.machineDropdown.parent().before(response.message);\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tjQuery('.response').stop().animate({\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t}, 'slow', function(){\n\t\t\t\t\t\t\tjQuery(this).remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 5000 );\n\n\t\t\t\t},1000)\n\t\t\t}, 'json' );\n\n\t\t},\n\n\t\ttoggleAdvancedForm:function(){\n\t\t\tApp.toggleAdvanced.slideDown();\n\t\t\tApp.toggleAdvancedFormButton.hide();\n\t\t},\n\n\t\ttoggleSettings:function(){\n\t\t\tApp.html.toggleClass('settings-visible');\n\t\t},\n\n\t\tupdateView:function(){\n\n\t\t\tjQuery.get('partials/machines.settings.php', function(response){\n\t\t\t\tjQuery('.settings-machines').html(response);\n\t\t\t});\n\n\t\t\tjQuery.get('partials/machines.dropdown.php', function(response){\n\t\t\t\tApp.machineDropdown.html(response);\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tApp.init();\n\n});\n"],"sourceRoot":"/source/"}