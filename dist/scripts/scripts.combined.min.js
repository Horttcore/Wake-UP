var App;jQuery(document).ready(function(){App={init:function(){App.html=jQuery("html"),App.form=jQuery(".wake-up"),App.submit=App.form.find('button[type="submit"]'),App.machineDropdown=jQuery(".machine-select"),App.toggleSettingsButton=jQuery(".settings-toggle"),App.bindings()},bindings:function(){App.toggleSettingsButton.click(function(e){e.preventDefault(),App.toggleSettings()}),App.form.submit(function(e){e.preventDefault(),App.machineWakeUp(App.machineDropdown.val())}),App.html.on("click",".machine-create",function(e){e.preventDefault(),App.machineCreate(jQuery(this).parents(".machine"))}),App.html.on("click",".machine-delete",function(e){e.preventDefault(),App.machineDelete(jQuery(this))}),App.html.on("click",".machine-edit",function(e){e.preventDefault(),App.machineEdit(jQuery(this))})},closeAdvancedForm:function(){App.toggleAdvanced.slideUp(),App.toggleAdvancedFormButton.show()},machineCreate:function(e){var n=e.find('input[name="machine-name"]'),t=e.find('input[name="machine-address"]'),a=e.find(".create-machine");if(""!=n.val()&&""!=t.val()&&!a.hasClass("submitting")){a.addClass("submitting");var i={name:n.val(),address:t.val()};jQuery.post("api/create.php",i,function(e){"ok"==e.status&&(n.val(""),t.val(""),App.updateView())},"json")}},machineDelete:function(e){var n={id:e.data("id")};jQuery.post("api/delete.php",n,function(n){if("ok"==n.status){var t=jQuery(".machine-"+e.data("id"));t.animate({height:0,opacity:0},"slow",function(){jQuery(this).remove(),App.updateView()})}},"json")},machineEdit:function(e){var n=e.parents(".machine"),t=n.html();n.html('<p><input name="machine-name" value="'+n.data("name")+'" required placeholder="Name"></p><p><input name="machine-address" value="'+n.data("address")+'" required placeholder="Adress"></p><p><a class="machine-edit-cancel" href="#">Abbruch</a> <button class="machine-edit-save button-secondary">Speichern</button></p>').addClass("editing"),n.find('[name="machine-name"]').focus(),n.find(".machine-edit-cancel").click(function(e){e.preventDefault(),n.html(t).removeClass("editing")}),n.find(".machine-edit-save").click(function(e){e.preventDefault();var a=jQuery(this);a.hasClass("submitting")||(a.addClass("submitting"),App.machineSave(n,t))})},machineSave:function(e,n){var t=e.find('[name="machine-name"]'),a=e.find('[name="machine-address"]');if(""!=t.val()&&""!=a.val()){var i={id:e.data("id"),name:t.val(),address:a.val()};jQuery.post("api/update.php",i,function(i){"ok"==i.status&&(e.find(".submitting").removeClass("submitting"),e.removeClass("editing").html(n).data("name",t.val()).data("address",a.val()),e.find(".machine-name").html(t.val()),e.find(".machine-address").html(a.val()))},"json")}},machineWakeUp:function(e){if(""!=e){var n={id:e};App.submit.addClass("submitting"),jQuery.post("api/wake-up.php",n,function(e){setTimeout(function(){App.submit.removeClass("submitting"),"ok"==e.status&&(App.machineDropdown.parent().before(e.message),setTimeout(function(){jQuery(".response").stop().animate({height:0,opacity:0},"slow",function(){jQuery(this).remove()})},5e3))},1e3)},"json")}},toggleAdvancedForm:function(){App.toggleAdvanced.slideDown(),App.toggleAdvancedFormButton.hide()},toggleSettings:function(){App.html.toggleClass("settings-visible")},updateView:function(){jQuery.get("partials/machines.settings.php",function(e){jQuery(".settings-machines").html(e)}),jQuery.get("partials/machines.dropdown.php",function(e){App.machineDropdown.html(e)})}},App.init()});
//# sourceMappingURL=scripts.combined.min.js.map
